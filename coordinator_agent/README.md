# コーディネーターエージェント

すべてのエージェント呼び出しの起点となるコーディネーターエージェントです。ユーザーからの質問を受け取り、適切な専門エージェントに問い合わせて回答を提供します。

## 概要

コーディネーターエージェントは、マルチエージェントシステムの中心として機能し、以下の役割を担います：

- ユーザーからの質問を分析し、適切な専門エージェントを選択
- 複数のエージェントへの並列問い合わせ
- エージェント間のチェーン実行（あるエージェントの結果を別のエージェントに渡す）
- クエリのインテント分析
- セッション管理とメモリ機能

## 技術構成

- **フレームワーク**: Google ADK (Agent Development Kit)
- **UI**: Streamlit
- **プロトコル**: A2A (Agent-to-Agent Protocol)
- **言語**: Python 3.13
- **主要コンポーネント**:
  - `coordinator_agent.py`: コーディネーターエージェントのメインロジック
  - `ui.py`: Streamlitベースのチャットインターフェース
  - `remote_agent_connection.py`: リモートエージェントとの接続管理
  - `config.py`: 環境変数の設定

## 必要環境

- uv (Pythonのパッケージマネージャー)

uv環境がない場合は、必要に応じて以下の通りインストールしてください。
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
export PATH="$HOME/.local/bin:$PATH"
```

## 環境構築

```bash
# (必要に応じて) Python 3.13のインストール
uv python install 3.13

# プロジェクトのPythonバージョンを3.13に固定
uv python pin 3.13

# 必要なパッケージのインストール
uv sync
```

## 環境変数の設定

`.env`ファイルを作成し、以下を設定してください：

```bash
# Google AI API Key
GOOGLE_API_KEY=your_api_key_here

# 使用するLLMモデル
LLM_MODEL_ID=gemini-2.0-flash

# 専門エージェントのURL
UCHINA_GUCHI_AGENT_URL=http://0.0.0.0:10001
```

## 実行方法

### 前提条件
専門エージェント（例: uchina_guchi_agent）が起動している必要があります。

### 起動コマンド

```bash
uv run streamlit run ui.py --server.address 0.0.0.0
```

起動後、ブラウザで `http://localhost:8501` にアクセスしてチャットUIを使用できます。

## 使用方法

1. ブラウザでチャットUIにアクセス
2. テキスト入力欄にメッセージを入力
3. コーディネーターエージェントが自動的に適切な専門エージェントに問い合わせ
4. 専門エージェントからの回答が表示されます

## 主な機能

### 単一エージェントへの問い合わせ
コーディネーターエージェントが自動的に適切なエージェントを選択して問い合わせを行います。

### 並列問い合わせ
複数のエージェントに同時に問い合わせを行い、それぞれの回答を取得します。

### エージェントチェーン
あるエージェントの回答を別のエージェントに渡して、連鎖的な処理を実行します。

### セッション管理
会話の履歴を保持し、コンテキストを維持した対話が可能です。
